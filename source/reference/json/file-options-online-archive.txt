.. _atlas-cli-file-options-online-archive-file:

========================================
Online Archive Configuration File
========================================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can use an Online Archive configuration file to specify the required 
settings for creating and updating an Online Archive. This archive stores 
data from one cluster within one project. To use this resource, the 
requesting API Key must have the Project Data Access Admin role.

Use the following resources to:

- Learn the required settings you can specify in the Online Archive 
  configuration file.

- View and copy sample configuration files.

Required Online Archive Create and Update Settings
--------------------------------------------------

|service| requires the following settings to create an Online Archive with
the {+atlas-cli+}. You must specify these Online Archive settings either
in the configuration file or as flags in the command:

.. list-table:: 
   :header-rows: 1 
   :widths: 20 10 70 

   * - Field 
     - Type 
     - Description 

   * - ``groupId``
     - string
     - Unique identifier for your project. Your group id is the same 
       as your project id. For existing groups, your group/project id 
       remains the same. The resource and corresponding 
       endpoints use the term groups.

   * - ``archiveID``
     - string
     - Unique 24-hexadecimal digit string that identifies 
       the online archive to update. This param is required for updating an
       existing Online Archive.
  
   * - ``clusterName``
     - string
     - Human-readable label that identifies the cluster that contains 
       the collection for which you want to create one online archive.

   * - ``collName``
     - string
     - The name of your collection.

   * - ``criteria``
     - object
     - Rules by which MongoDB MongoDB Cloud archives data.

   * - ``dbName``
     - string
     - Human-readable label of the database that 
       contains the collection that contains the online archive.

For a full list of available settings, see the API documentation for 
:oas-atlas-op:`Create One Online Archive<>`.

Example Online Archive Create Command
-------------------------------------
After you create the file, run the command to create the Online Archive.

.. code-block::

    atlas clusters onlineArchive create --file online-archive-create.json --output json

Example Online Archive Update Command
-------------------------------------
After you create the file, run the command to update the Online Archive.

.. code-block::

    atlas clusters onlineArchive update --file online-archive-update.json --output json

Example Online Archive Create Configuration File
------------------------------------------------

.. literalinclude:: /includes/online-archive-create.json


Example Online Archive Update Configuration File
------------------------------------------------

.. literalinclude:: /includes/online-archive-update.json
